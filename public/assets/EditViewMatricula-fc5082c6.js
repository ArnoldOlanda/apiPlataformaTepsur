import{r as d,b as e,y as ge,j as i,l as W,p as fe,q as $,n as A,K as be,m as Z,as as xe,T as P,B as Ce,ah as ve,G as Se,g as Me,u as ye,a as De,E as _e,aI as Te,W as we}from"./index-b05c3593.js";import{S as Q,E as Ee,a as Pe,b as Ie}from"./EUbication-78bfa379.js";import{g as ee,c as We,a as ke,d as $e}from"./utilities-59a1cf49.js";import{T as Y}from"./TableRowCustom-f60afab4.js";import{T as Ae}from"./TableContainer-10b5223d.js";import{b as oe,a as J,T as p,c as ae}from"./TableRow-52fc41de.js";import{T as Le}from"./TableHead-f4539647.js";import{E as ie}from"./Edit-18203eee.js";import{D as Fe}from"./Delete-e33b6966.js";import{A as He}from"./Add-1cbcdd1e.js";import{P as Re}from"./Page-87bac860.js";import{P as je,U as Be}from"./UpdateImgPago-63cb66da.js";import{u as Ne}from"./useMatricula-d95bae7c.js";import{S as Ue}from"./SelectCustom-ab67c468.js";import{C as X}from"./CustomSelectSearchLabel-0730f57a.js";import{S as re}from"./Save-65a6da06.js";import{P as qe}from"./Print-c93fef86.js";import"./TextfieldsTools-ddad1e93.js";import"./CircularProgress-eeae7465.js";import"./Person-b92946bf.js";import"./CustomSelectSearch-f02217ed.js";import"./Autocomplete-7a426b1a.js";import"./GlobalAlerts-e291f7f6.js";import"./Tooltip-8a46e05f.js";import"./index-bf7d37e3.js";/* empty css               */import"./Upload-b6926ce3.js";import"./DragDrop-a7418bc8.js";import"./stylesDrag-a0f829b9.js";import"./schedule.service-5bfabb81.js";import"./specialization.service-3d04622c.js";import"./careers.service-c54b684b.js";import"./MenuItem-d8a67f6c.js";const ze=({open:t,handleClose:g,selected:s,formState:D,onAddModule:_,schedules:T=[],modules:C=[],onInputChange:m})=>{const E=s?[...C.map(o=>({label:o.nombre,value:o.uuid}))]:[...C.filter(o=>!D.modulos.some(a=>a.modulo.uuid==o.uuid)).map(o=>({label:o.nombre,value:o.uuid}))],v=[...T.map(o=>({label:`${o.hora_inicio} - ${o.hora_fin} / ${ee(o.dias)}`,value:o.uuid}))],[u,f]=d.useState(null),[l,c]=d.useState(""),[r,n]=d.useState(""),[b,x]=d.useState(""),[w,S]=d.useState(""),L=({target:o})=>{c(o.value)},F=({target:o})=>{n(o.value)},H=({target:o})=>{x(o.value)},R=({target:o})=>{S(o.value)};return d.useEffect(()=>{if(s){const o=D.modulos.find(a=>a.uuid==s);o?(f(o),c(o.modulo?o.modulo.uuid:""),n(o.horario?o.horario.uuid:""),x(o.modalidad!=""?o.modalidad:""),S(o.fecha_inicio?We(o.fecha_inicio):"")):(c(""),n(""),x(""),S(""))}else c(""),n(""),x(""),S("")},[t]),e(ge,{open:t,handleClose:g,title:s?"Editar modulo":"Agregar modulo",children:e("form",{onSubmit:o=>{o.preventDefault();const a=T.find(M=>M.uuid==r),k=C.find(M=>M.uuid==l);if(s){const M={modulo:{...k},horario:{uuid:a.uuid,hora_inicio:a.hora_inicio,hora_fin:a.hora_fin,dias:a.dias},modalidad:b,fecha_inicio:w};m({target:{name:"modulos",value:[...D.modulos.map(I=>I.uuid==u.uuid?{...I,...M}:I)]}})}else{const M={modulo:{...k},horario:{uuid:a.uuid,hora_inicio:a.hora_inicio,hora_fin:a.hora_fin,dias:a.dias},modalidad:b,fecha_inicio:w};_(M)}g()},children:i(W,{width:"300px",px:3,children:[e(X,{label:"Modulo",name:"modulo",value:l,onChange:L,options:E,loading:C.length==0,required:!0,mt:0,disabled:s!=null}),e(X,{label:"Horario",name:"horario",value:r,onChange:F,options:v,required:!0}),e(Ue,{label:"Modalidad",name:"modo",value:b,onChange:H,opts:Ge,required:!0}),e(fe,{margin:"normal",fullWidth:!0,sx:{flex:1,minWidth:"150px"},variant:"outlined",size:"small",color:"secondary",value:w,onChange:R,type:"date",required:!0}),i($,{sx:{mt:2},variant:"contained",color:"primary",type:"submit",onClick:()=>!0,children:[" ",e(re,{sx:{mr:1}}),"Guardar"]})]})})})},Ge=[{label:"Presencial",value:"presencial"},{label:"Virtual",value:"virtual"}],Oe=({data:t,onAddModule:g,formState:s,onInputChange:D,onDelete:_,modules:T,schedules:C,edit:m,handleClose:E,handleOpen:v,open:u,onEdit:f})=>{const[l,c]=d.useState([]),r=["nombre","horario","fechaInicio","modalidad"];return d.useEffect(()=>{if(t.length!=0){const n=r.reduce((b,x)=>{const w=Math.max(...t.map(S=>String(S[x]).length));return{...b,[x]:w}},{});c(n)}},[t]),e(Ae,{sx:{maxHeight:200,zIndex:1},children:i(oe,{size:"small",stickyHeader:!0,children:[e(Le,{children:i(J,{children:[e(p,{align:"center",children:"Módulo"}),e(p,{align:"center",children:"Horario"}),e(p,{align:"center",children:"Inicio"}),e(p,{align:"center",children:"Modalidad"}),m&&e(p,{align:"center",children:"Acciones"})]})}),e(ae,{children:t.map((n,b)=>i(J,{children:[e(p,{align:"center",sx:{minWidth:`${l.nombre+4}ch`},children:n.nombre}),e(p,{align:"center",sx:{minWidth:`${l.horario+4}ch`},children:n.horario}),e(p,{align:"center",sx:{minWidth:`${l.fechaInicio+4}ch`},children:n.fechaInicio}),e(p,{align:"center",sx:{minWidth:`${l.modalidad+4}ch`},children:n.modalidad!="-"?Ve[n.modalidad]:"-"}),m&&i(p,{align:"center",children:[e(A,{onClick:()=>f(n.uuid),children:e(ie,{})}),s.tipoCarre=="modular"&&e(A,{onClick:()=>_(n.uuid),children:e(Fe,{})})]})]},`modulo ${b}`))}),!m&&t.length==0&&e("caption",{style:{textAlign:"center"},children:"No hay datos para mostrar"}),(m&&t.length==0||s.tipoCarre=="modular")&&e("caption",{children:e(be,{children:i($,{color:"secondary",onClick:v,children:[e(He,{}),"Agregar Módulo"]})})})]})})},Ve={presencial:"Presencial",virtual:"Virtual"},Ke=({matricula:t,formState:g,onInputChange:s,modules:D,schedules:_,edit:T,handleClose:C,handleOpen:m,open:E,onEditMod:v,onAddModule:u})=>{const f=c=>{s({target:{name:"modulos",value:g.modulos.filter((r,n)=>r.uuid!=c)}})},l=(c=[])=>c.map((r,n)=>({uuid:r.uuid??`${n}`,nombre:r.modulo.nombre??"-",horario:r.horario?`${r.horario.hora_inicio} - ${r.horario.hora_fin} / ${ee(r.horario.dias)}`:"-",modalidad:r.modalidad!=""&&r.modalidad!=null?r.modalidad:"-",fechaInicio:r.fecha_inicio?ke(r.fecha_inicio):"-"}));return i(Z,{flexDirection:"column",justifyContent:"space-between",children:[i(W,{flexDirection:"row",alignItems:"center",gap:2,children:[e(xe,{}),e(P,{component:"h1",variant:"h6",sx:{textAlign:"left"},children:"Datos Académicos"})]}),e(oe,{size:"small",sx:{alignSelf:"flex-start"},children:i(ae,{children:[e(Y,{align:"right",name:"Carrera",value:t&&t.carrera?t.carrera.nombre:"-"}),e(Y,{align:"right",name:"Sede",value:t&&t.sede?t.sede.nombre:"-"})]})}),e(Ce,{sx:{maxWidth:"100%"},children:e(Oe,{onEdit:v,handleClose:C,handleOpen:m,open:E,modules:D,data:t?l(g.modulos):[],onAddModule:u,formState:g,onInputChange:s,onDelete:f,schedules:_,edit:T})})]})},Io=({toggleDrawer:t})=>{const{id:g}=ve(),s=Se(),_=new URLSearchParams(s.search).get("edit"),{user:T,isLoading:C,token:m}=Me(h=>h.user),E={token:m,uuid:"",anio:new Date().getFullYear(),mes:new Date().getMonth(),sede:T.sede.uuid,searchFor:"",search:"",inicio:"",horario:"",nombres:"",ape_paterno:"",ape_materno:"",celular:"",celReferencia:"",correo:"",edad:"",dni:"",sexo:"",grado:"",departamento:"",provincia:"",distrito:"",direccion:"",residencia:"",carrera:"",tipoCarre:"",modulos:[],tipoPago:"",nroDocu:"",entidad:"",monto:"",imgDoc:null,responsable:"",horaPago:"00:00",fechaPago:""},v=Ne(E),{formState:u,setFormState:f,onInputChange:l,modules:c,schedules:r,getModules:n,getListSchedules:b,loading:x,setUbication:w,departamentos:S,distritos:L,provincias:F,getListDistritos:H,getListProvincias:R,grados:N,getMatricula:o,matricula:a,getpdf:k,getListCareers:M,onEdit:I}=v,te={departamentos:S,distritos:L,provincias:F,getListDistritos:H,getListProvincias:R},ne=ye(),U=De(ne.breakpoints.up("sm")),[y,le]=d.useState(_??!1),j=()=>{le(!y)};d.useEffect(()=>{o(g).then(h=>{h&&b(h.carrera.uuid)})},[]);const[se,q]=d.useState(null),[z,B]=d.useState(!1),G=()=>{B(!1)},de=()=>{q(null),B(!0)},ce=h=>{q(h),B(!0)},[O,ue]=d.useState(1),V=h=>{l({target:{name:"modulos",value:[...u.modulos,{uuid:O,...h}]}}),ue(O+1)},[me,K]=d.useState(!1),he=()=>{K(!1)},pe=()=>{K(!0)};return a==-1?e(_e,{}):i(Re,{toggleDrawer:t,Actions:y?e(A,{onClick:j,children:e(Te,{})}):e(A,{onClick:j,children:e(ie,{})}),customTitle:!0,title:i(W,{flexDirection:"row",alignItems:"center",columnGap:1,justifyContent:"flex-start",flexWrap:"wrap",children:[e(we,{to:"/home/matricula/listado",style:{color:"gray",textDecoration:"none"},children:i(P,{fontWeight:"bold",component:"h1",variant:U?"body1":"caption",sx:{textAlign:"left","&:hover":{textDecoration:"underline"}},children:["Listado Matricula ",">"]})}),e(P,{fontWeight:"bold",component:"h1",variant:U?"h6":"body1",sx:{textAlign:"left",position:"sticky"},children:"Detalle Matricula"})]}),children:[i(W,{gap:3,component:"form",onSubmit:h=>I(h,j),children:[e(Z,{sx2:{background:"#2C2C2C"},flexDirection:"column",children:i(W,{justifyContent:"space-between",flexDirection:"row",flexWrap:"wrap",gap:1,children:[i(P,{color:"white",children:[e("b",{children:"Fecha:"})," ",a?$e(a.fecha_inscripcion):"-"]}),i(P,{color:"white",children:[e("b",{children:"Tipo:"})," ",a?Qe[a.tipo_matricula]:"-"]}),i(P,{color:"white",children:[e("b",{children:"Responsable:"})," ",a&&a.secretaria?`${a.secretaria.nombres.split(" ")[0]} ${a.secretaria.ape_paterno}`:"-"]})]})}),i(Q,{children:[e(Ee,{matricula:a,formState:u,onInputChange:l,grados:N,edit:y,setFormState:f}),e(Pe,{matricula:a,formState:u,onInputChange:l,ubicacion:te,loading:x,setUbication:w,edit:y,setFormState:f})]}),e(Ke,{onAddModule:V,onEditMod:ce,handleClose:G,handleOpen:de,open:z,modules:c,matricula:a,formState:u,onInputChange:l,schedules:r,edit:y}),i(Q,{children:[e(Ie,{setFormState:f,matricula:a,formState:u,onInputChange:l,edit:y}),e(je,{handleOpenImg:pe,matricula:a})]}),y?i($,{variant:"contained",color:"primary",type:"submit",children:[" ",e(re,{sx:{mr:1}})," Guardar matricula"]}):i($,{variant:"contained",color:"primary",onClick:()=>k(a.uuid),children:[" ",e(qe,{sx:{mr:1}})," Imprimir matricula"]})]}),y&&e(ze,{open:z,handleClose:G,formState:u,onInputChange:l,selected:se,modules:c,onAddModule:V,schedules:r}),e(Be,{formPago:v,handleClose:he,open:me})]})},Qe={nuevo:"Nuevo",reingreso:"Reingreso"};export{Io as default};
