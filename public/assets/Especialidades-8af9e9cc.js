import{g as y,b as e,y as R,B as z,j as C,p as v,r as c,q as U,l as A}from"./index-b05c3593.js";import{P as _}from"./Page-87bac860.js";import{C as $}from"./CustomSelectSearchLabel-0730f57a.js";import{T as G}from"./TableCRUDMini-8ef25830.js";import{C as q}from"./CustomActionCRUD-56f80e1a.js";import{u as H}from"./useSpecializations-d4d20def.js";import{S as J}from"./SelectCustom-ab67c468.js";import{I as w}from"./InputAdornment-b1693cda.js";import{L as F}from"./LoadingButton-caa486e8.js";import{E as K}from"./Edit-18203eee.js";import{D as Q}from"./Delete-e33b6966.js";import"./Autocomplete-7a426b1a.js";import"./GlobalAlerts-e291f7f6.js";import"./Tooltip-8a46e05f.js";import"./RowCRUD-b35830b8.js";import"./TableRow-52fc41de.js";import"./TableContainer-10b5223d.js";import"./TableHead-f4539647.js";import"./specialization.service-3d04622c.js";import"./schedule.service-5bfabb81.js";import"./utilities-59a1cf49.js";import"./careers.service-c54b684b.js";import"./MenuItem-d8a67f6c.js";import"./CircularProgress-eeae7465.js";const V=({formModal:S,open:x,handleClose:o,isLoading:u,selected:n})=>{const{user:i}=y(t=>t.user),{onInputChange:r,formState:s,onSubmit:l,OnEditSpecializations:b,sedes:h}=S,p=[...h.map(t=>({label:t.nombre,value:t.uuid}))];return e(R,{open:x,handleClose:o,title:n?"Editar Tarfia":"Agregar Tarifa",children:e(z,{sx:{px:3,pb:3,width:"300px"},children:e("form",{style:{flex:1},onSubmit:t=>{t.preventDefault(),n?b(n,o):l(o)},children:C(z,{sx:X,children:[e(v,{margin:"normal",sx:{flex:1,minWidth:"150px"},name:"nombre",label:"Nombre",variant:"outlined",size:"small",color:"secondary",value:s.nombre,onChange:r,required:!0}),e(v,{margin:"normal",sx:{flex:1,minWidth:"150px"},name:"duracionSemanas",label:"Duracion",variant:"outlined",type:"number",size:"small",color:"secondary",value:s.duracionSemanas,onChange:r,required:!0,InputProps:{endAdornment:e(w,{position:"end",children:"semanas"})}}),e(v,{margin:"normal",sx:{flex:1,minWidth:"150px"},name:"precio",label:"Precio",variant:"outlined",size:"small",color:"secondary",value:s.precio,onChange:r,required:!0,InputProps:{startAdornment:e(w,{position:"start",children:"S/."})}}),e(J,{required:!0,label:"Sede",name:"sede",value:s.sede,onChange:r,opts:p,disabled:i.rol!="root"}),n?e(F,{fullWidth:!0,loading:u,type:"submit",variant:"contained",color:"primary",sx:{mt:2,alignSelf:"flex-end"},children:"Editar Especialización"}):e(F,{fullWidth:!0,loading:u,type:"submit",variant:"contained",color:"primary",sx:{mt:2,alignSelf:"flex-end"},children:"Agregar Especialización"})]})})})})},X={flex:1,display:"flex",flexDirection:"column",gap:"0px 24px",flexWrap:"wrap"},De=({toggleDrawer:S})=>{const[x,o]=c.useState(!1),[u,n]=c.useState(null),[i,r]=c.useState([]),{token:s,user:l,isLoading:b}=y(a=>a.user),{sedes:h}=y(a=>a.utilities),p=[...h.map(a=>({label:a.nombre,value:a.uuid}))],[f,t]=c.useState(l.rol?p[0].value:l.sede.uuid),P=({target:a})=>{a.value!=""&&t(a.value)},T={token:s,nombre:"",duracionSemanas:0,precio:"",sede:l.rol?"":l.sede.uuid},E=H(T),{data:g,onResetForm:W,OndeleteSpecialization:B,getListSpecializationsBySede:I,setFormState:L,formState:M}=E,O=()=>{o(!0)},D=()=>{W(),o(!1),n(null)},j=a=>{o(!0),n(i[a].uuid);const m=g.find(d=>d.uuid==i[a].uuid);L({...M,nombre:m.nombre,duracionSemanas:m.duracion_semanas,precio:m.precio})},k=a=>{const m=[];return a.map(d=>{m.push({uuid:d.uuid,nombre:d.nombre,duracionSemanas:d.duracion_semanas,precio:`S/. ${d.precio}`})}),m},N=[e(q,{action:a=>{j(a)},children:e(K,{})}),e(q,{action:a=>{B(i[a].uuid,D)},children:e(Q,{})})];return c.useEffect(()=>{I(f)},[f]),c.useEffect(()=>{r(k(g))},[g]),C(_,{toggleDrawer:S,title:"Especialidades",Actions:e(U,{onClick:()=>O(),type:"submit",variant:"contained",color:"primary",sx:{mt:1,width:"100px"},children:" Agregar "}),children:[C(A,{gap:2,children:[e(A,{width:200,flexDirection:"row",gap:3,children:e($,{required:!0,label:"Sede",name:"sede",value:f,onChange:P,options:p})}),e(G,{data:i,headers:Z,dataTypes:Y,extraActions:N,rows:10})]}),e(V,{formModal:E,handleClose:D,isLoading:b,open:x,selected:u})]})},Y=["nombre","duracionSemanas","precio"],Z=[{name:"nombre",align:"center"},{name:"Duración (Semanas)",align:"center"},{name:"Precio",align:"center"}];export{De as default};
