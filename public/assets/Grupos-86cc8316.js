import{U as T,b as e,Q as P,l as o,j as t,T as u,n as L,u as H,V as j,W as U,B,a as O,g as W,r as p,X as Q,y as Y,K,p as z,q as X}from"./index-b05c3593.js";import{T as E}from"./Tooltip-8a46e05f.js";import{I as A}from"./Info-b8afdcbc.js";import{b as q,g as N,c as J}from"./utilities-59a1cf49.js";import{L as Z,H as ee,S as ae}from"./SearchBar-7bd1490d.js";import{T as re,a as M}from"./ToggleButtonGroup-67aa73a9.js";import{u as te}from"./useGroup-570a5d53.js";/* empty css               */import{C as y}from"./CustomSelectSearchLabel-0730f57a.js";import{S as oe}from"./SelectCustom-ab67c468.js";import{N as ie}from"./TextfieldsTools-ddad1e93.js";import{L as V}from"./LoadingButton-caa486e8.js";import{P as ne}from"./Page-87bac860.js";import"./GlobalAlerts-e291f7f6.js";import"./CustomSelectSearch-f02217ed.js";import"./Autocomplete-7a426b1a.js";import"./CircularProgress-eeae7465.js";import"./MenuItem-d8a67f6c.js";import"./InputAdornment-b1693cda.js";import"./index-3b733f26.js";import"./schedule.service-5bfabb81.js";import"./teacher.service-ca2ba6d0.js";import"./careers.service-c54b684b.js";const le=T(e("path",{fillRule:"evenodd",d:"M3 3v8h8V3H3zm6 6H5V5h4v4zm-6 4v8h8v-8H3zm6 6H5v-4h4v4zm4-16v8h8V3h-8zm6 6h-4V5h4v4zm-6 4v8h8v-8h-8zm6 6h-4v-4h4v4z"}),"GridView"),se=T(e("path",{d:"M3 14h4v-4H3v4zm0 5h4v-4H3v4zM3 9h4V5H3v4zm5 5h13v-4H8v4zm0 5h13v-4H8v4zM8 5v4h13V5H8z"}),"ViewList"),R=({grupo:i,vertical:n=!1})=>{const c=i.estado=="en_curso"?"#2BB128":"#EB3C3C";return e(P,{children:n?e(o,{sx:{position:"absolute",right:0,bottom:0,flexDirection:"column",alignItems:"flex-end",justifyContent:"space-between"},children:e(E,{placement:"top-end",title:t(o,{children:[t(u,{variant:"caption",children:["Capacidad: ",i.capacidad]}),t(u,{variant:"caption",children:["Encargado: ",i.encargado]}),t(u,{variant:"caption",children:["Modulo: ",i.modulo]}),t(u,{variant:"caption",children:["Inicio: ",i.inicio]})]}),children:e(L,{children:e(A,{})})})}):t(o,{sx:{position:"absolute",right:0,bottom:0,flexDirection:"row",alignItems:"center"},children:[e(o,{sx:{height:25,borderRadius:50,px:1,border:`1px solid ${c}`,color:c,justifyContent:"center",alignItems:"center"},children:e(u,{variant:"body2",children:ce[i.estado]})}),e(E,{placement:"top-end",title:t(o,{children:[t(u,{variant:"caption",children:["Capacidad: ",i.capacidad]}),t(u,{variant:"caption",children:["Encargado: ",i.encargado]}),t(u,{variant:"caption",children:["Modulo: ",i.modulo]}),t(u,{variant:"caption",children:["Inicio: ",i.inicio]})]}),children:e(L,{children:e(A,{})})})]})})},ce={en_curso:"En curso",cerrado:"Cerrado"},de=({grupo:i,id:n,matches:c})=>{const m=H();return t(j,{component:o,sx:{flex:0,overflow:"hidden",textAlign:"start",position:"relative",minWidth:300,maxWidth:"380px"},children:[e(U,{color:"primary",to:`${n}`,style:{textDecoration:"none",color:m.palette.text.primary,width:"100%",height:150},children:e(o,{children:t(o,{p:2,children:[t(o,{direction:"row",flexWrap:"wrap",children:[q(i.carrera,!1,{fontWeight:"bold",variant:c?"h6":"body1"}),e(u,{fontWeight:"bold",variant:c?"h6":"body1",children:`/ ${i.nombre}`})]}),t(o,{gap:1,children:[e(u,{variant:c?"body2":"caption",children:i.profesor}),e(u,{variant:"caption",children:i.horario})]})]})})}),e(R,{grupo:i})]})},ue=({id:i,grupo:n,index:c,matches:m})=>{const f=H(),h=n.estado=="en_curso"?"#2BB128":"#EB3C3C";return t(Z,{component:j,sx:{mb:2,p:0,borderRadius:"10px",position:"relative"},children:[e(U,{to:`${i}`,style:{textDecoration:"none",color:f.palette.text.primary,width:"100%"},children:t(o,{p:0,flexDirection:"row",height:116,width:"100%",children:[e(B,{bgcolor:me[c%6],height:"100%",width:"16px",borderRadius:"10px 0 0 10px"}),t(o,{flexDirection:"column",flex:1,p:2,alignItems:"start",height:"100%",justifyContent:"space-between",children:[t(o,{children:[t(o,{flexDirection:"row",gap:1,alignItems:"center",children:[t(o,{flexDirection:"row",flexWrap:"wrap",children:[q(n.carrera,!1,{fontWeight:"bold",variant:m?"h6":"body1"}),e(u,{variant:m?"h6":"body1",sx:{fontWeight:"bold"},children:`- ${n.nombre}`})]}),e(o,{sx:{minWidth:72,height:25,borderRadius:50,px:1,border:`1px solid ${h}`,color:h,justifyContent:"center",alignItems:"center"},children:e(u,{variant:"body2",children:he[n.estado]})})]}),e(u,{variant:m?"body2":"caption",mb:0,children:`${n.profesor}`})]}),e(u,{justifySelf:"flex-end",variant:"caption",children:`${n.horario}`})]})]})}),e(R,{grupo:n,vertical:!0})]})},me=["#FBDB68","#B4E476","#39D4AF","#FF6A6A","#B960FF","#FFA93E","#FF81C1"],he={en_curso:"En curso",cerrado:"Cerrado"},pe="/assets/fondo-8eca20b9.jpg",fe=({formState:i,setFormState:n,data:c,onInputChange:m,careers:f})=>{const h=H(),d=O(h.breakpoints.up("sm")),{isLoading:s,token:w,user:$}=W(l=>l.user),b=(l=[])=>l.map(a=>({id:a.uuid,nombre:a.nombre,horario:`${a.horario.hora_inicio} - ${a.horario.hora_fin} / ${N(a.horario.dias)} / ${a.modalidad}`,profesor:`${a.docente.nombres} ${a.docente.ape_paterno} ${a.docente.ape_materno}`,imagen:pe,estado:a.estado,carrera:a.carrera.nombre,modalidad:a.modalidad,mes:new Date(a.fecha_inicio).getMonth(),aÃ±o:new Date(a.fecha_inicio).getFullYear(),nombres:`${a.carrera.nombre} ${a.nombre}`,filters:[a.nombre,a.modalidad,a.carrera.nombre,a.secretaria.uuid,a.modulo.nombre],capacidad:`${a.numero_matriculados}/${a.cupos_maximos}`,encargado:`${a.secretaria.nombres.split(" ")[0]} ${a.secretaria.ape_paterno}`,modulo:a.modulo.nombre,date:new Date(a.fecha_inicio),inicio:J(a.fecha_inicio),observacion:""})),[x,C]=p.useState(!1),[g,v]=p.useState([]),D=(l,a)=>{a!==null&&C(a)};return p.useEffect(()=>{v(b(c))},[c]),t(o,{flex:1,gap:2,flexDirection:"column",maxHeight:"100%",width:"100%",children:[e(ee,{flex:0,formState:i,setFormState:n}),t(o,{flex:0,flexDirection:"row",columnGap:3,flexWrap:"wrap",alignItems:"center",rowGap:2,maxHeight:"100%",children:[e(ae,{flex:1,setFormState:n,formState:i,onInputChange:m,OriginalData:b(c),setData:v,career:!0,date:!0,filter:!0,modo:!0,carreras:f,secretaria:$.usuario.rol.nombre!="Secretaria",modulo:!0}),e(o,{flex:0,alignItems:"end",justifyContent:"center",children:t(re,{value:x,exclusive:!0,onChange:D,"aria-label":"text alignment",children:[e(M,{value:!0,"aria-label":"left aligned",children:e(le,{})}),e(M,{value:!1,"aria-label":"left aligned",children:e(se,{})})]})})]}),e(o,{flex:1,maxHeight:"100%",width:"100%",overflow:"auto",children:g.length!=0?x?e(o,{flexDirection:"row",gap:3,flexWrap:"wrap",children:g.map((l,a)=>e(de,{matches:d,grupo:l,id:l.id,img:l.imagen,name:`${l.carrera} - ${l.nombre}`,doc:l.profesor,schedule:l.horario},a))}):g.map((l,a)=>e(ue,{matches:d,id:l.id,grupo:l,index:a},a)):t(o,{height:"100%",flex:1,alignItems:"center",justifyContent:"center",children:[e(Q,{}),e(u,{children:"No hay grupos para mostrar"})]})})]})},ge=({formGroup:i,open:n,handleClose:c,isLoading:m,careers:f})=>{const{user:h}=W(r=>r.user),{onInputChange:d,formState:s,getListSchedules:w,onResetForm:$,schedules:b,onSubmit:x,teachers:C,getModules:g,modules:v,carreras:D,secretarias:l}=i,a=[...f.map(r=>({label:r.nombre,value:r.uuid}))],S=[...C.map(r=>({label:`${r.nombres} ${r.ape_paterno} ${r.ape_materno}`,value:r.uuid}))],I=[...b.map((r,ve)=>({label:`${r.hora_inicio} - ${r.hora_fin} / ${N(r.dias)}`,value:r.uuid}))],G=[...v.map(r=>({label:r.nombre,value:r.uuid}))],F=[...l.map(r=>({label:`${r.nombres} ${r.ape_paterno} ${r.ape_materno}`,value:r.uuid}))];p.useState("");const _=r=>{r.target.value!=""&&r.target.value!=null&&(w(r.target.value),g(r.target.value),d(r))},k=r=>{r.target.value!=""&&r.target.value!=null&&d(r)};return p.useEffect(()=>{h.usuario.rol.nombre=="Secretaria"&&d({target:{name:"responsableUuid",value:h.uuid}})},[n]),e(Y,{open:n,handleClose:c,title:s.edit?"Editar Grupo":"Agregar Grupo",children:e(B,{sx:{px:3,pb:3,width:"600px"},children:e("form",{style:{flex:1},onSubmit:r=>x(r,c),children:t(B,{sx:be,children:[t(o,{flex:1,children:[e(ie,{formState:s,onInputChange:d}),e(y,{required:!0,label:"Carrera",name:"carrer",value:s.carrer,onChange:_,options:a}),e(y,{required:!0,label:"Modulo",name:"moduloUuid",value:s.moduloUuid,onChange:d,options:G,tooltip:s.carrer==""||s.carrer==null,placement:"right",titleTool:"Debe seleccionar alguna carrera"}),e(y,{required:!0,label:"Docente",name:"docente",value:s.docente,onChange:d,options:S}),e(oe,{label:"Modalidad",name:"modalidad",value:s.modalidad,onChange:d,opts:xe})]}),e(K,{orientation:"vertical",flexItem:!0}),e(o,{flex:1,justifyContent:"flex-start",children:t(o,{children:[e(y,{required:!0,label:"Horario",name:"horario",value:s.horario,onChange:k,options:I,tooltip:s.carrer==""||s.carrer==null,placement:"right",titleTool:"Debe seleccionar alguna carrera"}),e(z,{margin:"normal",sx:{flex:1,minWidth:"150px"},name:"cupos",label:"Capacidad",variant:"outlined",size:"small",color:"secondary",InputProps:{inputProps:{min:0,max:100}},type:"number",value:s.cupos,onChange:d,required:!0}),e(z,{margin:"normal",sx:{flex:1,minWidth:"150px"},name:"fechaInicio",label:"Inicio",type:"date",InputLabelProps:{shrink:!0},variant:"outlined",size:"small",color:"secondary",value:s.fechaInicio,onChange:d,required:!0}),e(y,{required:!0,label:"Responsable",name:"responsableUuid",value:s.responsableUuid,onChange:d,options:F,disabled:h.usuario.rol.nombre=="Secretaria"})]})}),s.edit?e(V,{fullWidth:!0,loading:m,type:"submit",variant:"contained",color:"primary",sx:{mt:2,alignSelf:"flex-end"},children:"Editar Grupo"}):e(V,{fullWidth:!0,loading:m,type:"submit",variant:"contained",color:"primary",sx:{mt:2,alignSelf:"flex-end"},children:"Agregar Grupo"})]})})})})},be={flex:1,display:"flex",flexDirection:"row",gap:"0px 24px",flexWrap:"wrap"},xe=[{label:"Presencial",value:"presencial"},{label:"Virtual",value:"virtual"}],Ne=({toggleDrawer:i})=>{const{user:n,token:c,isLoading:m}=W(_=>_.user),f={token:c,sede:n.sede.uuid??"",sedeUuid:n.sede.uuid??"",mes:new Date().getMonth(),anio:new Date().getFullYear(),carrera:"",docente:"",modalidad:"",edit:!1,name:"",horario:"",cupos:60,fechaInicio:"",moduloUuid:"",responsableUuid:""},h=te(f),{formState:d,onResetForm:s,getListTeachers:w,getListCareers:$,getListGroupsBySecre:b,getListGroups:x,setFormState:C,groups:g,setGroups:v,onInputChange:D,carreras:l,sedes:a}=h,[S,I]=p.useState(!1),G=()=>{I(!0)},F=()=>{s(),I(!1)};return p.useEffect(()=>{w(),$()},[]),p.useEffect(()=>{n.usuario.rol.nombre=="Secretaria"?b(n.uuid):x()},[d.anio,d.mes]),t(ne,{title:"Grupos",Actions:e(X,{sx:{width:"100px"},variant:"contained",color:"primary",onClick:G,children:" Agregar"}),toggleDrawer:i,children:[e(o,{gap:3,height:"100%",maxHeight:"100%",children:e(fe,{setFormState:C,data:g,setData:v,onInputChange:D,formState:d,careers:l,sedes:a})}),e(ge,{formGroup:h,open:S,handleClose:F,isLoading:m,careers:l})]})};export{Ne as default};
