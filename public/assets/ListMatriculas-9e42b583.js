import{f as O,g as R,r as i,j as d,l as V,b as e,Q as k,T as D}from"./index-b05c3593.js";/* empty css                  */import{T as A,V as H}from"./TableCRUD-26e7d6da.js";import{C as p}from"./CustomActionCRUD-56f80e1a.js";import{u as B}from"./useMatricula-d95bae7c.js";import{a as Q,b as W}from"./utilities-59a1cf49.js";import{P as q}from"./Page-87bac860.js";import{S as z}from"./SearchBar-7bd1490d.js";import{U as G,P as J}from"./TextfieldsTools-ddad1e93.js";import{U as K}from"./UserInfo-ca2e0ba6.js";import{E as X}from"./Edit-18203eee.js";import{P as Z}from"./Print-c93fef86.js";import{T as aa}from"./Tooltip-8a46e05f.js";import"./RowCRUD-b35830b8.js";import"./TableRow-52fc41de.js";import"./TableContainer-10b5223d.js";import"./TableHead-f4539647.js";import"./MenuItem-d8a67f6c.js";import"./schedule.service-5bfabb81.js";import"./GlobalAlerts-e291f7f6.js";import"./specialization.service-3d04622c.js";import"./careers.service-c54b684b.js";import"./CustomSelectSearch-f02217ed.js";import"./Autocomplete-7a426b1a.js";import"./CircularProgress-eeae7465.js";import"./InputAdornment-b1693cda.js";import"./index-3b733f26.js";import"./CustomSelectSearchLabel-0730f57a.js";import"./SelectCustom-ab67c468.js";const Ia=({toggleDrawer:M})=>{const g=O(),{user:w,isLoading:ra,token:$}=R(t=>t.user),F={token:$,anio:new Date().getFullYear(),mes:new Date().getMonth(),searchFor:"",search:"",inicio:"",horario:"",sede:w.sede.uuid,modulo:[],carrera:[],dInicio:`${new Date().getFullYear()}-${(new Date().getMonth()+1).toString().padStart(2,"0")}-01`,dFin:`${new Date().getFullYear()}-${(new Date().getMonth()+1).toString().padStart(2,"0")}-${new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate()}`,pago:""},S=B(F),{matriculas:s,getpdf:x,getListMatriculas:C,getListCareers:y,formState:m,onInputChange:P,carreras:T,setFormState:v}=S,[n,l]=i.useState([]),[h,f]=i.useState(!1),[L,U]=i.useState(null),E=()=>{f(!h)},I=t=>{f(!0),U(t)},_=t=>{g(`/home/matricula/${n[t].uuid}`)},Y=t=>{g(`/home/matricula/${n[t].uuid}?edit=true`)},j=(t=[],b)=>e(aa,{disableInteractive:!0,title:d(k,{children:[e(D,{variant:"body2",color:"inherit",children:"Modulo inscritos"}),e("ul",{style:{paddingLeft:"20px"},children:t.map((a,c)=>e("li",{children:a.modulo.nombre},`modulo${c}`))})]}),children:e(D,{variant:"body2",color:"inherit",sx:{textDecoration:"underline"},children:`${b} modulos`})}),u=t=>t.map((a,c)=>{const r=[...a.matriculaModulosModulo.filter(o=>o.estado=="matriculado"||o.estado=="matriculado_culminado")];return{filters:[a.carrera.nombre,...r.map(o=>o.modulo.nombre),a.pagoMatricula?"Pagado":"Pendiente",a.secretaria.uuid],index:c,uuid:a.uuid,date:new Date(a.fecha_inscripcion),fechaInscripcion:Q(a.fecha_inscripcion),nombres:`${a.alumno.nombres} ${a.alumno.ape_paterno} ${a.alumno.ape_materno}`,nombre:a.alumno.nombres.toLowerCase(),apellidos:`${a.alumno.ape_paterno} ${a.alumno.ape_materno}`.toLowerCase(),dni:a.alumno.dni,carrera:W(a.carrera.nombre,!1,{variant:"body2"}),modulo:r.length>1?j(r,r.length):r.length==0?"-":r[0].modulo.nombre,modulos:r.map(o=>o.modulo.nombre),responsable:e(G,{handleUser:I,user:a.secretaria}),pago:e(J,{pagoMatricula:a.pagoMatricula,uuid:a.pagoMatricula?a.pagoMatricula.uuid:""})}}),N=[e(p,{action:Y,children:e(X,{})}),e(p,{action:_,children:e(H,{})}),e(p,{action:t=>{x(n[t].uuid)},children:e(Z,{})})];return i.useEffect(()=>{C().then(t=>{l(u(t))})},[m.anio,m.mes]),i.useEffect(()=>{l(u(s))},[s]),i.useEffect(()=>{y()},[]),d(q,{title:"Listado de Matriculas",toggleDrawer:M,children:[d(V,{gap:3,height:"100%",maxHeight:"100%",children:[e(z,{data:n,carreras:T,setFormState:v,formState:m,onInputChange:P,OriginalData:u(s),setData:l,career:!0,date:!0,filter:!0,vOpt:!0,modulo:!0,pago:!0,sort:!0,headerDate:!0,secretaria:!0}),e(A,{data:n,headers:ea,dataTypes:ta,extraActions:N,rows:10})]}),e(K,{onClose:E,open:h,user:L})]})},ea=[{name:"Fecha Matricula",align:"center"},{name:"Pago",align:"center"},{name:"Nombres y apellidos",align:"center"},{name:"DNI",align:"center"},{name:"Carrera",align:"center"},{name:"MÃ³dulo(s)",align:"center"},{name:"Responsable",align:"center"}],ta=["fechaInscripcion","pago","nombres","dni","carrera","modulo","responsable"];export{Ia as default};
