import{f as v,g as H,r as o,b as t,j as c,l}from"./index-b05c3593.js";import{P as L}from"./Page-87bac860.js";import{T as j,V as y}from"./TableCRUD-26e7d6da.js";import{u as V}from"./usePagos-2be5453f.js";import{H as _,S as $}from"./SearchBar-7bd1490d.js";import{a as A}from"./utilities-59a1cf49.js";/* empty css               */import{C as E}from"./CustomSelectSearchLabel-0730f57a.js";import{C as I}from"./CustomActionCRUD-56f80e1a.js";import"./RowCRUD-b35830b8.js";import"./TableRow-52fc41de.js";import"./TableContainer-10b5223d.js";import"./TableHead-f4539647.js";import"./MenuItem-d8a67f6c.js";import"./GlobalAlerts-e291f7f6.js";import"./CustomSelectSearch-f02217ed.js";import"./Autocomplete-7a426b1a.js";import"./CircularProgress-eeae7465.js";import"./InputAdornment-b1693cda.js";import"./index-3b733f26.js";import"./Tooltip-8a46e05f.js";const me=({toggleDrawer:p})=>{const d=v(),{user:u,isLoading:T,token:g}=H(e=>e.user),f={token:g,anio:new Date().getFullYear(),mes:new Date().getMonth(),searchFor:"-",search:""},{getListPagos:h,pagos:b,formState:n,onInputChange:S,setFormState:r,sedes:D}=V(f),[s,i]=o.useState([]),x=[...D.map(e=>({label:e.nombre,value:e.uuid}))],[C,P]=o.useState(u.sede.uuid),w=({target:e})=>{e.value!=""&&P(e.value)},m=e=>e.map(a=>({uuid:a.uuid,fechaPago:A(a.fecha),modo:a.forma_pago.description,hora:a.hora??"-",monto:a.monto??"-",responsable:a.responsable??"-",codigo:a.num_comprobante,entidad:a.entidad,dni:a.pension.matricula.alumno.dni,nombres:`${a.pension.matricula.alumno.ape_paterno??"-"} ${a.pension.matricula.alumno.ape_materno??"-"} ${a.pension.matricula.alumno.nombres??"-"}`})),F=[t(I,{action:e=>{d(`/home/pago/${s[e].uuid}`)},children:t(y,{})})];return o.useEffect(()=>{h().then(e=>{i(m(e))})},[]),t(L,{title:"Listado de Pagos",toggleDrawer:p,children:c(l,{gap:2,maxHeight:"100%",children:[t(_,{flex:0,formState:n,setFormState:r}),c(l,{flexDirection:"row",gap:3,justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:[t($,{flex:1,setFormState:r,formState:n,onInputChange:S,OriginalData:m(b),setData:i,date:!0,vOpt:!0,secretaria:!0}),t(E,{mt:1,flex:0,required:!0,label:"Sede",value:C,onChange:w,options:x})]}),t(j,{data:s,headers:M,dataTypes:N,extraActions:F,rows:10})]})})},M=[{name:"DNI",align:"center"},{name:"Apellidos y nombres",align:"center"},{name:"Cod. Baucher",align:"center"},{name:"Fecha",align:"center"},{name:"Hora",align:"center"},{name:"Monto",align:"center"},{name:"Metodo de Pago",align:"center"},{name:"Entidad",align:"center"}],N=["dni","nombres","codigo","fechaPago","hora","monto","modo","entidad"];export{me as default};
