import{b as e,m as f,j as a,l as s,T as r,q as T,B as u,ad as v,V as N,ah as O,u as I,a as H,f as M,g as z,r as L,E as R,W as b,Q as p}from"./index-b05c3593.js";import"./stylesDrag-a0f829b9.js";/* empty css               */import{T as U}from"./TablaDeudas-0a20c1ac.js";import{S as q}from"./Step3-ca5f4f1f.js";import{P as G}from"./Page-87bac860.js";import{u as Q}from"./usePagos-2be5453f.js";import{T as l,S as V}from"./TableRowCustom-f60afab4.js";import{a as Y,c as J}from"./utilities-59a1cf49.js";import{U as K}from"./index-bf7d37e3.js";import{T as P}from"./TableContainer-10b5223d.js";import{b as D,c as C,a as x,T as i,t as y}from"./TableRow-52fc41de.js";import{U as X}from"./Upload-b6926ce3.js";import{T as Z}from"./TableHead-f4539647.js";import{B as ee,N as ne}from"./Breadcrumbs-47eb73f7.js";import"./SelectCustom-ab67c468.js";import"./MenuItem-d8a67f6c.js";import"./DragDrop-a7418bc8.js";import"./TextfieldsTools-ddad1e93.js";import"./CircularProgress-eeae7465.js";import"./InputAdornment-b1693cda.js";import"./GlobalAlerts-e291f7f6.js";import"./Tooltip-8a46e05f.js";const te=({pago:n})=>e(f,{flexDirection:"row",children:a(s,{flex:1,flexDirection:"row",alignItems:"left",gap:5,flexWrap:"wrap",children:[e(P,{sx:{flex:3},children:e(D,{size:"small",sx:{alignSelf:"flex-start"},children:a(C,{children:[e(l,{align:"right",name:"Nº Boleta/Transacción",value:n.num_comprobante??"-"}),e(l,{align:"right",name:"Tipo de pago",value:n.forma_pago.description??"-"}),e(l,{align:"right",name:"Entidad",value:n.entidad?ae[n.entidad]:"-"}),e(l,{align:"right",name:"Hora",value:n.hora??"-"}),e(l,{align:"right",name:"Fecha",value:Y(n.fecha)??"-"}),e(l,{align:"right",name:"Monto",value:e(r,{style:{flex:1,minWidth:"50px",textAlign:"right"},children:`S/. ${n.monto??"0"}`})}),e(x,{children:e(i,{children:a(s,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",columnGap:3,flexWrap:"wrap",children:[e(r,{minWidth:200,flex:1,variant:"caption",children:"Documento de Pago"}),e(s,{flex:1,children:e(s,{flex:0,alignSelf:"flex-end",children:n.foto_comprobante?"Documento Existente":a(T,{variant:"contained",onClick:handleOpenImg,children:[e(X,{})," Subir Documento"]})})})]})})})]})})}),e(u,{flex:1,display:"flex",justifyContent:"center",alignItems:"center",sx:{minWidth:250},children:e(K,{children:e("img",{style:{width:"100%",height:"100%",objectFit:"cover",maxHeight:250},src:n.foto_comprobante})})})]})}),ae={yape:"YAPE","banco de la nacion":"Banco de la nación","caja cuzo":"Caja Cusco",bcp:"BCP",oficina:"Oficina"},oe=({pagos:n=[]})=>e(P,{sx:{},component:N,children:a(D,{size:"small",children:[e(Z,{children:a(re,{children:[e(c,{align:"center",children:"Nro"}),e(c,{align:"center",children:"Nº Boleta/Transacción"}),e(c,{align:"center",children:"Fecha"}),e(c,{align:"center",children:"Hora"}),e(c,{align:"center",children:"Entidad"}),e(c,{align:"center",children:"Monto"})]})}),e(C,{children:n.length!=0&&n.map((o,m)=>a(x,{children:[e(i,{align:"center",children:m+1}),e(i,{align:"center",children:o.num_comprobante}),e(i,{align:"center",children:J(o.fecha)}),e(i,{align:"center",children:o.hora}),e(i,{align:"center",children:o.entidad}),a(i,{align:"center",children:["S/. ",o.monto]})]},`group/${m}`))}),n.length==0&&e("caption",{style:{textAlign:"center"},children:"No hay pagos para mostrar"})]})}),c=v(i)(({theme:n})=>({[`&.${y.head}`]:{backgroundColor:"#1B1B1B",color:n.palette.common.white},[`&.${y.body}`]:{fontSize:14}})),re=v(x)(({theme:n})=>({"&:nth-of-type(odd)":{backgroundColor:n.palette.action.hover},"&:last-child td, &:last-child th":{border:0}})),je=({toggleDrawer:n})=>{const{id:o}=O(),m=I(),g=H(m.breakpoints.up("sm")),S=M(),{user:le,isLoading:ce,token:w}=z(d=>d.user),W={token:w,nroDocu:"",entidad:"",monto:0,tipoPago:"",imgDoc:null,horaPago:"00:00",fechaPago:""},{formState:B,onInputChange:A,tipoPago:E,onImageChange:_,onSubmit:j,alumno:h,pension:t,getPension:$}=Q(W);L.useEffect(()=>{$(o)},[]);const k=d=>{d.preventDefault(),j(o,()=>{S(`/home/grupo/${t.grupo.uuid}?pago=true`)})};return t==-1?e(R,{}):e(G,{toggleDrawer:n,title:a(ee,{separator:e(ne,{fontSize:"small"}),children:[e(b,{style:{textDecoration:"none",color:"gray"},to:"/home/grupo",children:e(r,{fontWeight:"bold",component:"h1",variant:g?"body1":"caption",sx:{textAlign:"left","&:hover":{textDecoration:"underline"}},children:"Grupos"})}),t&&e(b,{style:{textDecoration:"none",color:"gray"},to:`/home/grupo/${t.grupo.uuid}`,children:e(r,{fontWeight:"bold",component:"h1",variant:g?"body1":"caption",sx:{textAlign:"left","&:hover":{textDecoration:"underline"}},children:t.grupo.nombre})}),e(r,{fontWeight:"bold",component:"h1",variant:g?"body1":"body2",sx:{textAlign:"left",position:"sticky"},children:t&&t.estado=="COMPLETO"?"Detalle Pago":"Registrar Pago"})]}),children:e(s,{gap:3,sx:{maxWidth:"100%"},children:a(u,{component:"form",style:{gap:"24px 24px",display:"flex",flexDirection:"column",flexWrap:"wrap",maxWidth:"100%"},onSubmit:k,children:[a(f,{sx2:{gap:3,maxWidth:"100%"},children:[a(r,{variant:"body1",sx:{textAlign:"left"},children:[e("b",{children:"Alumno: "})," ",h?`${h.nombres} ${h.ape_paterno} ${h.ape_materno}`:"-"]}),e(U,{deudas:t?[t]:[]})]}),t?t.estado!="COMPLETO"&&t.pago_pensiones.length>=1&&a(f,{sx2:{gap:3},children:[e(r,{variant:"h6",sx:{textAlign:"left"},children:"Pagos Anteriores"}),e(oe,{pagos:t.pago_pensiones})]}):e(p,{}),t?t.estado!="COMPLETO"?a(p,{children:[e(q,{formState:B,onImageChange:_,onInputChange:A,pagos:E,flag:!1,requiredFig:!0,sistema:!0}),e(u,{sx:{...ie,justifyContent:"flex-end"},children:e(T,{type:"submit",color:"primary",variant:"contained",children:"Registrar"})})]}):a(p,{children:[a(s,{flexDirection:"row",alignItems:"center",gap:2,children:[e(V,{}),e(r,{component:"h1",variant:"h6",sx:{textAlign:"left"},children:"Pagos"})]}),t.pago_pensiones.map((d,F)=>e(te,{pago:d},F))]}):e(p,{})]})})})},ie={flex:0,display:"flex",flexDirection:"row",gap:"0px 24px;",flexWrap:"wrap"};export{je as default};
