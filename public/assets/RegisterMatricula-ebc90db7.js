import{b as e,m as q,j as c,l as w,p as H,n as K,r as y,B as f,H as le,J as se,K as de,q as I,F as ce,g as ue,e as pe,T as me,O as he}from"./index-b05c3593.js";/* empty css                  */import{u as ge}from"./useMatricula-d95bae7c.js";import{S as be,s as S,a as fe,b as xe,c as ve,d as Ce}from"./Step1-49be6760.js";import{S as O}from"./SelectCustom-ab67c468.js";import{C as A}from"./CustomSelectSearchLabel-0730f57a.js";import{D as Q}from"./Delete-e33b6966.js";import{g as X}from"./utilities-59a1cf49.js";import{A as Se}from"./Add-1cbcdd1e.js";import{S as ye}from"./Step3-ca5f4f1f.js";import{A as De}from"./AddSchedule-c46ae1fc.js";import{T as ke}from"./Tooltip-8a46e05f.js";import{L as Le}from"./LoadingButton-caa486e8.js";import{P as $e}from"./Page-87bac860.js";import"./schedule.service-5bfabb81.js";import"./GlobalAlerts-e291f7f6.js";import"./specialization.service-3d04622c.js";import"./careers.service-c54b684b.js";import"./TextfieldsTools-ddad1e93.js";import"./CircularProgress-eeae7465.js";import"./CustomSelectSearch-f02217ed.js";import"./Autocomplete-7a426b1a.js";import"./MenuItem-d8a67f6c.js";import"./DragDrop-a7418bc8.js";import"./stylesDrag-a0f829b9.js";import"./index-bf7d37e3.js";/* empty css               */import"./InputAdornment-b1693cda.js";import"./ToggleButtonGroup-67aa73a9.js";const Me=({index:n,modulo:i,formState:a,modulos:p=[],grupos:u=[],schedulesNames:m=[],onInputChange:h,onDelete:D,loading:x})=>{const v=({target:l})=>{const r=a.modulos.map((t,s)=>s==n?{...t,modulo:l.value}:t);h({target:{name:"modulos",value:r}})},k=({target:l})=>{const r=a.modulos.map((t,s)=>s==n?{...t,horario:l.value}:t);h({target:{name:"modulos",value:r}})},L=({target:l})=>{const r=a.modulos.map((t,s)=>s==n?{...t,modalidad:l.value}:t);h({target:{name:"modulos",value:r}})},$=({target:l})=>{const r=a.modulos.map((t,s)=>s==n?{...t,inicio:l.value}:t);h({target:{name:"modulos",value:r}})};return e(q,{sx2:Ae,children:c(w,{flex:1,flexDirection:"row",columnGap:3,flexWrap:"wrap",children:[e(A,{label:"Modulo/Semestre",name:"modulo",value:i.modulo,onChange:v,options:p,disabled:a.carrera==""||a.carrera==null,loading:x}),e(A,{label:"Horario",name:"horario",value:i.horario,onChange:k,options:m,disabled:a.carrera==""||a.carrera==null,loading:x}),e(O,{label:"Modalidad",name:"modo",value:i.modalidad,onChange:L,opts:we}),e(H,{margin:"normal",sx:{flex:1,minWidth:"150px"},name:"inicio",label:"Inicio",type:"date",InputLabelProps:{shrink:!0},variant:"outlined",size:"small",color:"secondary",value:i.inicio,onChange:$}),n!=0&&e(w,{alignItems:"center",justifyContent:"center",children:e(K,{onClick:()=>D(n),children:e(Q,{})})})]})})},we=[{label:"-",value:""},{label:"Presencial",value:"presencial"},{label:"Virtual",value:"virtual"}],Ae={flex:1,borderRadius:2,p:4,display:"flex",flexDirection:"column",boxSizing:"border-box"},Pe=({formCareer:n,handleOpenAdd:i})=>{const{formState:a,setFormState:p,onInputChange:u,carreras:m,modules:h,getModules:D,schedules:x,sedes:v,getListSchedules:k,loading:L,secretarias:$,speacials:l}=n,[r,t]=y.useState([...h.map(o=>({label:o.nombre,value:o.uuid}))]),s=[...l.map(o=>({label:o.nombre,value:o.uuid}))],_=[...m.map(o=>({label:o.nombre,value:o.uuid}))],E=[...x.map(o=>({label:`${o.hora_inicio} - ${o.hora_fin} / ${X(o.dias)}`,value:o.uuid}))],R=[...$.map(o=>({label:`${o.nombres} ${o.ape_paterno} ${o.ape_materno}`,value:o.uuid}))],z=[...v.map(o=>({label:o.nombre,value:o.uuid}))],B=()=>{p({...a,carrera:"",modulos:[],modulo:"",modo:"",horario:"",isCarrera:!a.isCarrera})},T=o=>{o.target.value!=""&&o.target.value!=null&&D(o.target.value).then(b=>{const C=b;p({...a,tipoCarre:m.find(M=>M.uuid==o.target.value).tipo_carrera,carrera:o.target.value}),t([...C.map(M=>({label:M.nombre,value:M.uuid}))]),k()})},j=()=>{const o={modulo:"",horario:"",modalidad:"",inicio:""};u({target:{name:"modulos",value:[...a.modulos,o]}})},N=o=>{u({target:{name:"modulos",value:a.modulos.filter((b,C)=>C!=o)}})},W=()=>{p({...a,hora_inicio:"00:00",hora_fin:"00:00",dias:[],horario:""})};return c(w,{gap:3,children:[c(q,{sx2:G,children:[c(f,{sx:J,children:[e(O,{required:!0,label:"Sede",name:"sede",value:a.sede,onChange:u,opts:z}),e(A,{required:!0,label:"Responsable",name:"responsableUuid",value:a.responsableUuid,onChange:u,options:R})]}),c(f,{sx:{...J,alignItems:"center"},children:[a.isCarrera?e(A,{required:!0,label:"Carrera",name:"carrera",value:a.carrera,onChange:T,options:_}):e(A,{required:!0,label:"Especialidad",name:"especialidad",value:a.especialidad,onChange:u,options:s}),e(le,{sx:{mt:1},control:e(se,{name:"isCarrera",onChange:B,color:"secondary",checked:!a.isCarrera}),label:"Especialidad"})]})]}),a.isCarrera?a.modulos.slice(0).map((o,b)=>e(Me,{modulo:o,index:b,onInputChange:u,formState:a,grupos:[],schedulesNames:E,modulos:r,onDelete:N,loading:L},`moduloslist ${b}`)):e(q,{sx2:G,children:c(w,{flex:1,flexDirection:"row",columnGap:3,flexWrap:"wrap",children:[c(w,{mt:1,flexDirection:"row",alignItems:"center",justifyContent:"center",gap:1,children:[e(H,{sx:{flex:1,minWidth:"150px"},name:"horario",label:"Horario",autoComplete:"nope",onClick:i,placeholder:"Inicio - Fin / Dias",variant:"outlined",size:"small",color:"secondary",value:a.horario,InputLabelProps:{shrink:!0},readOnly:!0}),e(K,{onClick:W,children:e(Q,{})})]}),e(O,{label:"Modalidad",name:"modo",value:a.modo,onChange:u,opts:Fe}),e(H,{margin:"normal",sx:{flex:1,minWidth:"150px"},name:"inicio",label:"Inicio",type:"date",InputLabelProps:{shrink:!0},variant:"outlined",size:"small",color:"secondary",value:a.inicio,onChange:u})]})}),a.isCarrera&&(a.tipoCarre=="modular"||a.modulos.length==0)&&e(de,{onClick:j,children:c(I,{color:"secondary",children:[e(Se,{}),"Agregar Modulo"]})})]})},G={flex:1,borderRadius:2,p:4,display:"flex",flexDirection:"column",boxSizing:"border-box"},J={flex:1,display:"flex",flexDirection:"row",gap:"0px 24px;",flexWrap:"wrap"},Fe=[{label:"-",value:""},{label:"Presencial",value:"presencial"},{label:"Virtual",value:"virtual"}],F=["Datos del Estudiante","Datos academicos","Datos de pago"],Ie=ce(be)(({theme:n})=>({[`&.${S.alternativeLabel}`]:{},[`&.${S.active}`]:{[`& .${S.line}`]:{backgroundColor:"#FED800"}},[`&.${S.completed}`]:{[`& .${S.line}`]:{backgroundColor:"#FED800"}},[`& .${S.line}`]:{height:3,border:0,backgroundColor:n.palette.mode==="dark"?n.palette.grey[800]:"#eaeaf0",borderRadius:1}}));function _e({initial:n}){const[i,a]=y.useState(0),[p,u]=y.useState(new Set),{user:m,isLoading:h,token:D}=ue(d=>d.user),[x,v]=y.useState(!1),k=()=>{v(!0)},L=()=>{v(!1)},$={token:D,id:m.uuid,tipo:"nuevo",nombres:"",ape_paterno:"",ape_materno:"",celular:"",celReferencia:"",correo:"",edad:"",dni:"",sexo:"",grado:"",departamento:"",provincia:"",distrito:"",direccion:"",residencia:"",carrera:"",isCarrera:!0,especialidad:"",modulos:[{modulo:"",horario:"",modalidad:"",inicio:""}],horario:"",inicio:"",sede:m.sede.uuid,modo:"",pendiente:!1,tipoPago:"",nroDocu:"",entidad:"",monto:0,imgDoc:null,hora_inicio:"00:00",hora_fin:"00:00",turno:"",dias:[],edit:!1,horaPago:"00:00",tipoCarre:"semestral",error:!1,fechaPago:"",responsableUuid:m.uuid},l=ge($),{formState:r,setFormState:t,onInputChange:s,onSubmit:_,onImageChange:E,onFill:R,onAceptFil:z,departamentos:B,provincias:T,distritos:j,getListDistritos:N,getListProvincias:W,grados:o,tipoPago:b,loading:C,getListSpecializations:M,getListCareers:Re,onSubmitEspe:Y,onInitial:Z}=l,ee=pe(),ae={0:e(Ce,{setFormState:t,formCareer:l,formState:r,onInputChange:s,onFill:R,onAceptFil:z,isLoading:h,ubicacion:{departamentos:B,distritos:j,provincias:T,getListDistritos:N,getListProvincias:W},grados:o,loading:C}),1:e(Pe,{formCareer:l,handleOpenAdd:k}),2:e(ye,{formCareer:l,formState:r,onInputChange:s,onImageChange:E,pagos:b,loading:C})},oe=d=>!1,U=d=>p.has(d),re=()=>{a(0)},ie=d=>{if(d.preventDefault(),!r.error)if(i===F.length-1)r.isCarrera?_():Y();else{let g=p;U(i)&&(g=new Set(g.values()),g.delete(i)),a(P=>P+1),u(g),ee(he({matricula:{...r,step:i+1}}))}},te=()=>{a(d=>d-1)},V=async d=>{s({target:{name:"horario",value:`${r.hora_inicio} - ${r.hora_fin} / ${X(r.dias.map(g=>Ee[g]))}`}}),d()};return y.useEffect(()=>{Z(a)},[]),c(f,{sx:{width:"100%"},children:[e(fe,{activeStep:i,alternativeLabel:!0,connector:e(Ie,{}),children:F.map((d,g)=>{const P={width:"100px",height:"100px"},ne={};return U(g)&&(P.completed=!1),e(xe,{...P,children:e(ve,{...ne,children:d})},d)})}),i===F.length?c(y.Fragment,{children:[e(me,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),c(f,{sx:{display:"flex",flexDirection:"row",py:2},children:[e(f,{sx:{flex:"1 1 auto"}}),e(I,{variant:"contained",onClick:re,children:"Reset"})]})]}):c("form",{style:{paddingTop:"24px"},onSubmit:ie,children:[ae[i],c(f,{sx:{display:"flex",flexDirection:"row",pt:2},children:[i!=0&&e(I,{color:"inherit",variant:"contained",disabled:i===0,onClick:te,sx:{mr:1},children:"Atras"}),e(f,{sx:{flex:"1 1 auto"}}),oe(),e(ke,{title:r.error?"Corrija todos los errores":"",children:i===F.length-1?e(Le,{type:"submit",color:"primary",variant:"contained",children:"Terminar"}):e(I,{type:"submit",color:"primary",variant:"contained",children:"Siguiente"})})]})]}),e(De,{formState:r,handleClose:L,isLoading:!1,onEdit:V,onInputChange:s,onSubmit:V,open:x})]})}const Ee={0:"Lun",1:"Mar",2:"Mie",3:"Jue",4:"Vie",5:"Sab",6:"Dom"},ua=({toggleDrawer:n})=>e($e,{title:"Registrar matricula",toggleDrawer:n,children:e(_e,{})});export{ua as default};
