import{e as E,r,g as y,ai as g,bd as S,aj as s,be as F,ae as d,bf as R,bg as x,S as j,s as k,bh as v,bi as H,o as M}from"./index-b05c3593.js";import{e as q}from"./utilities-59a1cf49.js";import{g as z}from"./GlobalAlerts-e291f7f6.js";const $=(m={})=>{const e=E(),[o,c]=r.useState(m),[f,w]=r.useState([]),[b,l]=r.useState(null),[I,p]=r.useState(null),[h,u]=r.useState([]),[L,P]=r.useState(null),[D,C]=r.useState(null),{createAlert:T}=z(),{token:n}=y(t=>t.user),{tipoPago:U,sedes:A}=y(t=>t.utilities);return{...o,formState:o,onInputChange:({target:t})=>{const{name:a,value:i}=t;c({...o,[a]:i})},onResetForm:()=>{c(m)},onSubmit:async(t,a)=>{T("este pago","Pago Registrado",async()=>{try{e(k());const i=await v({...o,token:n,entidad:o.entidad==""?"oficina":o.entidad,fecha:new Date(o.fechaPago),hora:o.horaPago!="00:00"?o.horaPago:q(new Date),pagoUuid:t});await H({token:n,image:D,pagoUuid:i.uuid}),e(M()),u(h.filter(B=>B.uuid!=t))}catch(i){throw i}},a)},getListPagos:async()=>{try{e(g());const t=await F({...o,token:n});return w([]),e(s()),t}catch(t){d(t),e(s())}},pagos:f,sedes:A,tipoPago:U,onImageChange:t=>{C(t),c({...o,imgDoc:t})},img:D,deudas:h,getDeudas:async t=>{try{e(g());const a=await x(n,t);j.fire({title:"Datos recuperados",icon:"success",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),u(a.pensiones),P(a.alumno),e(s())}catch(a){d(a),e(s())}},alumno:L,getPagoDetail:async t=>{try{e(g());const a=await S(n,t);return l(a),e(s()),a}catch{l(-1),e(s())}},pago:b,setFormState:c,getDeuda:async t=>{try{e(g());const a=await S(n,t);u(a),c({nroDocu:"",entidad:"",monto:0,tipoPago:"",imgDoc:null,horaPago:"00:00",fechaPago:"",entidad:""}),e(s())}catch(a){d(a),e(s())}},getPension:async t=>{try{e(g());const a=await R(n,t);P(a.matricula.alumno),p(a),c({...o,monto:a.restante}),e(s())}catch{p(-1),e(s())}},pension:I}};export{$ as u};
