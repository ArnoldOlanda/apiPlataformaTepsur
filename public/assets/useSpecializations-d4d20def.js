import{e as ma,r as d,g as U,ai as l,aj as c,ae as p,s as g,o as h,ak as $,al as k,aJ as A}from"./index-b05c3593.js";import{g as ga,a as ha,b as fa,c as _a,e as ya,d as Ma,f as Sa,h as wa}from"./specialization.service-3d04622c.js";import{g as ba}from"./GlobalAlerts-e291f7f6.js";import{g as za}from"./schedule.service-5bfabb81.js";import{g as C,c as F}from"./utilities-59a1cf49.js";import{a as Da}from"./careers.service-c54b684b.js";const Aa=(D={})=>{const i=ma(),[t,m]=d.useState(D),[_,B]=d.useState(null),[u,f]=d.useState([]),[J,L]=d.useState([]),[S,y]=d.useState(null),{createAlert:w,editAlert:v,deleteAlert:O}=ba(),[x,V]=d.useState([]),{grados:j,tipoPago:H,sedes:T,departamentos:E,modulos:W,secretarias:q}=U(e=>e.utilities),{token:n}=U(e=>e.user),[G,s]=d.useState(!1),[K,P]=d.useState([]),[N,R]=d.useState([]),Q=({target:e})=>{const{name:a,value:o}=e;m({...t,[a]:o})},X=()=>{m(D)},Y=async()=>{try{i(l());const e=await Da(t.token,t.sede);return V(e),i(c()),e}catch(e){i(c()),p(e)}},Z=async e=>{try{i(l());const a=await ga(t);return L(a||[]),i(c()),a||[]}catch(a){p(a),i(c())}},aa=async()=>{try{i(l());const e=await ha(t.token);return f(e||[]),i(c()),e||[]}catch(e){p(e),i(c())}},oa=async e=>{try{i(l());const a=await fa(t.token,e);return f(a||[]),i(c()),a||[]}catch(a){p(a),i(c())}},ea=async e=>{try{i(l());const a=await _a(t.token,e);return await I(a.alumno.direccion.departamento,a.alumno.direccion.provincia),y(a||null),a&&m({...t,uuid:a.uuid,nombres:a.alumno.nombres,ape_paterno:a.alumno.ape_paterno,ape_materno:a.alumno.ape_materno,celular:a.alumno.celular,celReferencia:a.alumno.celular_referencia,correo:a.alumno.correo,edad:a.alumno.edad,dni:a.alumno.dni,sexo:a.alumno.sexo,grado:a.alumno.grado_estudios.uuid,departamento:a.alumno.direccion.departamento,provincia:a.alumno.direccion.provincia,distrito:a.alumno.direccion.distrito,direccion:a.alumno.direccion.direccion_exacta,residencia:a.alumno.lugar_residencia,especializacion:a.especializacion.uuid,sede:a.sede.uuid,horario:M.length>0?`${a.horario.hora_inicio} - ${a.horario.hora_fin} / ${C(a.horario.dias)}`:"-",hora_inicio:a.horario.hora_inicio,hora_fin:a.horario.hora_fin,dias:a.horario.dias.map(o=>M[o]),pendiente:!1,tipoPago:a.pagoMatricula?a.pagoMatricula.forma_pago.description:"",nroDocu:a.pagoMatricula?a.pagoMatricula.num_comprobante:"",entidad:u.pagoMatricula?u.pagoMatricula.entidad:"",monto:a.pagoMatricula?a.pagoMatricula.monto:0,imgDoc:a.pagoMatricula?a.pagoMatricula.foto_comprobante:null,responsable:a.secretaria.nombres,horaPago:"00:00",inicio:F(a.fecha_inicio),modalidad:a.modalidad}),i(c()),a||{}}catch{return y(-1),i(c()),null}},ta=async e=>{v("esta matricula",async()=>{try{i(g());let a={tipoMatricula:t.tipo,alumno:{dni:t.dni,nombres:t.nombres,apePaterno:t.ape_paterno,apeMaterno:t.ape_materno,sexo:t.sexo,edad:t.edad,gradoEstudiosUuid:t.grado,lugarResidencia:t.residencia,celularReferencia:t.celReferencia,celular:t.celular,correo:t.correo,direccion:{direccionExacta:t.direccion,distrito:t.distrito,provincia:t.provincia,departamento:t.departamento}},especializacion:t.especializacion,sedeUuid:t.sede,horario:{dias:t.dias.map(r=>La[r]),horaInicio:t.hora_inicio,horaFin:t.hora_fin},modalidad:t.modalidad};const o=await ya(n,a,t.uuid);o&&m({...t,token:n,uuid:o.uuid,nombres:o.alumno.nombres,ape_paterno:o.alumno.ape_paterno,ape_materno:o.alumno.ape_materno,celular:o.alumno.celular,celReferencia:o.alumno.celular_referencia,correo:o.alumno.correo,edad:o.alumno.edad,dni:o.alumno.dni,sexo:o.alumno.sexo,grado:o.alumno.grado_estudios.uuid,departamento:o.alumno.direccion.departamento,provincia:o.alumno.direccion.provincia,distrito:o.alumno.direccion.distrito,direccion:o.alumno.direccion.direccion_exacta,residencia:o.alumno.lugar_residencia,especializacion:o.especializacion.uuid,sede:o.sede.uuid,horario:M.length>0?`${o.horario.hora_inicio} - ${o.horario.hora_fin} / ${C(o.horario.dias)}`:"-",hora_inicio:o.horario.hora_inicio,hora_fin:o.horario.hora_fin,dias:o.horario.dias.map(r=>M[r]),pendiente:!1,tipoPago:o.pagoMatricula?o.pagoMatricula.forma_pago.description:"",nroDocu:o.pagoMatricula?o.pagoMatricula.num_comprobante:"",entidad:u.pagoMatricula?u.pagoMatricula.entidad:"",monto:o.pagoMatricula?o.pagoMatricula.monto:0,imgDoc:o.pagoMatricula?o.pagoMatricula.foto_comprobante:null,responsable:o.secretaria.nombres,horaPago:"00:00",inicio:F(o.fecha_inicio),modalidad:o.modalidad}),y(o||null),i(h())}catch(a){throw a}},e)},ia=async(e,a)=>{O("esta especialización","Especialización Eliminada",async()=>{try{i(g());const o=await Ma(n,e);f([...u.filter(r=>r.uuid!==o.uuid)]),i(h())}catch(o){throw o}},a)},ra=async(e,a)=>{v("esta especialización",async()=>{i(g());try{const o=await Sa({uuid:e,...t,token:n});f([...u.map(r=>r.uuid==o.uuid?{...r,...o}:r)]),i(h())}catch(o){throw o}},a)},na=async e=>{w("esta especialización","Especialización Registrada",async()=>{try{i(g());const a=await wa({...t,token:n});f([...u,a]),i(h())}catch(a){throw a}},e)},ca=async e=>{window.open(`${API_URL}/matricula/generate-pdf/${e}`,"_blank")},sa=async e=>{try{i(l());const a=await za(n);setSchedules(a),i(c())}catch(a){throw a}},da=e=>{try{i(l());const a=x.find(o=>o.uuid==e).modulos;return setModules(a),i(c()),a}catch(a){throw a}},ua=async e=>{try{s(!0);const a=await $(n,e);return P(a),s(!1),a}catch(a){p(a),s(!1)}},la=async(e,a)=>{try{s(!0);const o=await k(n,e,a);return R(o),s(!1),o}catch(o){p(o),s(!1)}},I=async(e,a)=>{try{s(!0);const o=E.find(z=>z.departamento==e).ubigeoId,r=await $(n,o),b=r.find(z=>z.provincia==a).ubigeoId,pa=await k(n,o,b);P(r),R(pa),s(!1)}catch(o){p(o),s(!1)}};return{...t,formState:t,setFormState:m,onInputChange:Q,onResetForm:X,onSubmit:na,OndeleteSpecialization:ia,OnEditSpecializations:ra,getListSpecializations:aa,data:u,carreras:x,getListCareers:Y,grados:j,tipoPago:H,sedes:T,departamentos:E,modulos:W,secretarias:q,matriculas:J,setMatriculas:L,getListMatriculas:Z,getpdf:ca,matricula:S,getSpecialization:ea,getListSchedules:sa,getModules:da,getListDistritos:la,getListProvincias:ua,setUbication:I,provincias:K,distritos:N,loading:G,formUploadDoc:async(e,a)=>{w("este documento","Documento Registrado",async()=>{try{i(g());const o=await A({token:n,image:_,uuid:e});i(h())}catch(o){throw o}},a)},onImageChange:e=>{B(e),m({...t,imgDoc:e})},onUploadDocModal:async(e,a)=>{w("este documento","Documento Subido",async()=>{try{i(g());const r=await A({token:n,image:_,uuid:e});if(_){var o=new FileReader;o.onload=function(b){y({...S,pagoMatricula:{...S.pagoMatricula,foto_comprobante:b.target.result}})},o.readAsDataURL(_)}i(h())}catch(r){throw r}},a)},onEditMatricula:ta,getListSpecializationsBySede:oa}},M={Lun:0,Mar:1,Mie:2,Jue:3,Vie:4,Sab:5,Dom:6},La={0:"Lun",1:"Mar",2:"Mie",3:"Jue",4:"Vie",5:"Sab",6:"Dom"};export{Aa as u};
