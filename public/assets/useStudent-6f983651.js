import{t as v,e as T,r as c,g as w,ai as p,aj as d,ae as g,s as q,o as z,ak as L,al as D}from"./index-b05c3593.js";import{g as B}from"./GlobalAlerts-e291f7f6.js";import{a as G}from"./careers.service-c54b684b.js";const H=async(i,s,r)=>{try{return(await v.get(`/student?sede=${s}&year=${r}`,{headers:{"x-token":i}})).data}catch(u){throw u}},J=async(i,s)=>{try{return(await v.get(`/student/${s}`,{headers:{"x-token":i}})).data}catch(r){throw r}},nt=(i={})=>{const s=T(),[r,u]=c.useState(i),[P,y]=c.useState([]),[A,C]=c.useState(null),[I,b]=c.useState([]),{createAlert:K,editAlert:k,deleteAlert:N}=B(),[x,o]=c.useState(!1),[E,S]=c.useState([]),[$,h]=c.useState([]),{grados:F,tipoPago:O,sedes:R,departamentos:m,modulos:U,secretarias:Q}=w(e=>e.utilities),{token:n}=w(e=>e.user);return{...r,formState:r,setFormState:u,onInputChange:({target:e})=>{const{name:t,value:a}=e;u({...r,[t]:a})},onResetForm:()=>{u(i)},getListStudents:async e=>{try{s(p());const t=await H(n,e,r.anio);return y(t||[]),s(d()),t||[]}catch(t){g(t),s(d())}},setData:y,data:P,editStudent:async e=>{k("este alumno",async()=>{try{s(q()),s(z())}catch(t){throw t}},e)},modulos:U,carreras:I,getListCareers:async()=>{try{s(p());const e=await G(n);return b(e),s(d()),e}catch(e){s(d()),g(e)}},sedes:R,alumno:A,getStudent:async e=>{try{s(p());const t=await J(n,e);return C(t||[]),s(d()),t||[]}catch(t){return g(t),s(d()),-1}},departamentos:m,getListDistritos:async(e,t)=>{try{o(!0);const a=await D(n,e,t);return h(a),o(!1),a}catch(a){g(a),o(!1)}},getListProvincias:async e=>{try{o(!0);const t=await L(n,e);return S(t),o(!1),t}catch(t){g(t),o(!1)}},setUbication:async(e,t)=>{try{o(!0);const a=m.find(l=>l.departamento==e).ubigeoId,f=await L(n,a),j=f.find(l=>l.provincia==t).ubigeoId,M=await D(n,a,j);S(f),h(M),o(!1)}catch(a){g(a),o(!1)}},provincias:E,distritos:$,grados:F,loading:x}};export{nt as u};
